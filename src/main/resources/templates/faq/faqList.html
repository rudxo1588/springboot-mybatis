<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<title>Insert title here</title>
</head>
<body>
<h1>MyBatis DataSource</h1>
	<form id="faqFrm" action="/faqWrite">
		<div id="faqListDiv">
			<table border="1" style="align-content: center;">
				<thead>
					<tr>
						<th>순번</th>
						<th>제목</th>
						<th>내용</th>
						<th>날짜</th>
						<th>버튼</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="faqList : ${faqList}">
						<td th:text="${faqList.faqSeq}"></td>
						<td th:text="${faqList.faqTitle}"></td>
						<td th:text="${faqList.faqContent}"></td>
						<td th:text="${faqList.faqCreatedt}"></td>
						<td><input type="button" th:onclick="|faqUpdate('${faqList.faqSeq}')|" value="수정">
						<input type="button" th:onclick="|faqDel('${faqList.faqSeq}')|" value="삭제"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</form>
	<button onclick="faqWrite()">등록</button>
</body>
<script>
	$(function(){
		$.ajax({
			url : '/getFaqAllList',
			type : 'get',
			datatype : 'json',
			data : {},
			success : function(res) {
				console.log('select collection');
				console.log(res);
			},
			
			error : function(request, status, error) {
				console.log('error');
			}
		})
		/* $.ajax({
			url : '/faqImgListBySelectCollection',
			type : 'get',
			datatype : 'json',
			data : {
				'faqSeq' : 1,
				'delYn' : 'N'
			},
			success : function(res) {
				console.log('select collection');
				console.log(res);
			},
			
			error : function(request, status, error) {
				console.log('error');
			}
		})
		
		$.ajax({
			url : '/faqImgListByJoinCollection',
			type : 'get',
			datatype : 'json',
			data : {},
			success : function(res) {
				console.log('join collection');
				console.log(res)	
			},
			
			error : function(request, status, error) {
				console.log('error');
			}
		})
		
		$.ajax({
			url : '/faqImgListByAssciation',
			type : 'get',
			datatype : 'json',
			data : {},
			success : function(res) {
				console.log('select assciation');
				console.log(res);
			},
			
			error : function(request, status, error) {
				console.log('error');
			}
		})
		
		$.ajax({
			url : '/faqImgListByJoinAssociation',
			type : 'get',
			datatype : 'json',
			data : {},
			success : function(res) {
				console.log('join assciation');
				console.log(res);
			},
			
			error : function(request, status, error) {
				console.log('error');
			}
		}) */
	});
	
	function faqWrite() {
		$('#faqFrm').submit();
	}
	
	function faqDel(seq) {
		if(!confirm('삭제하시겠습니까?')) {
			return;
		}
		
		$.ajax({
			url: '/faq/faqDel',
			data : {
				'faqSeq' : seq
				},
			type : 'get',
			success : function(res) {
				alert('삭제되었습니다.');
				location.reload();
			},
			error : function(request, status, error) {
				alert('error발생');
			}
		})
	}
	
	function faqUpdate(seq) {
		location.href = '/faq/faqUpdate';
	}
	
</script>
</html>